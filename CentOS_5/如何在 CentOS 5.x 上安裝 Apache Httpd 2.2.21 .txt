如何在 CentOS 5.x 上安裝 Apache Httpd 2.2.21 


    1.先暫停原來的 httpd 服務及移除 Apache HTTP 2.2.3
    
        # service httpd stop
        # yum iy remove httpd
    
    
    2.下載並安裝 Apache httpd 2.2.21
    
    預設安裝路徑為 /usr/local/apache2
    
        # wget http://ftp.tc.edu.tw/pub/Apache//httpd/httpd-2.2.21.tar.gz
        # tar zxvf httpd-2.2.21.tar.gz
        # cd httpd-2.2.21
    
    2.1 確認 apr 和 appr-util 的版本
        
        在 Apache 官網說，Apache HTTP 需要 aprapr-util v1.2版以上支援才能使用，
        所以提供了兩個方法來安裝 apr/apr-util1.
        
        2.1.1 組態 Apache HTTP server 就把 apr/apr-util 一起組態，也就是強迫使用
            與 Apache HTTP 綁在一起的 apr/apr-util.
            
            # ./configure --with-included-apr
            # make; make install
            
        2.1.2 手動安裝 apr/apr-util
        
            組態、建立及安裝 apr 1.2
            # cd srclib/apr
            # ./configure --prefix=/usr/local/apr-httpd/
            # make
            # make install
    
            組態、建立及安裝 apr-util 1.2
            # cd ../apr-util
            # ./configure --prefix=/usr/local/apr-util-httpd/ \
                --with-apr=/usr/local/apr-httpd/
            # make
            # make install
            
            組態、建立及安裝 Apache httpd
            # ./configure --with-apr=/usr/local/apr-httpd/ \
                --with-apr-util=/usr/local/apr-util-httpd/ 
            # make
            # make install 
    
    
    2.2 測試 Apache HTTP 是否正常運作
        
        # /usr/local/apache2/bin/apachectl start 
    
            
    3.將 Apache 2.2.21 加到開機啟動
    
        # ln -s /usr/local/apache2/bin/apachectl /etc/init.d/apache2
    
        並將下列文字加到 /etc/rc.d/rc.local 中
    
        service apache2 start
        
    
    4.建立 Apache 專用的帳號和密碼
    
        這可以使用專用的帳號密碼來啟動 Apache HTTPd，而不必使用 root
    
        # groupdel apache    
        # userdel apache  
        # groupadd --gid=48 apache   
        # useradd -s /sbin/nologin -d /usr/local/apache2 -g apache --uid=48 apache
        # chown -R apache:apache /usr/local/apache2
    
        然後好像還要在 /usr/local/apache2/conf/httpd.conf 後面加上 User 和 Group
        因為一時找不到，所以就暫停了
    
    
    5.修改 Apache HTTPd 的網頁路徑  
  
  
